{% extends 'user/user_accounts_base.html' %}

{% block content %}
<style>
    .orders-container {
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .orders-header {
        text-align: center;
        margin-bottom: 20px;
    }

    .orders-header h2 {
        font-size: 24px;
        color: #333;
    }

    .orders-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }

    .orders-table th, .orders-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    .orders-table th {
        background-color: #f4f4f4;
        font-weight: bold;
    }

    .orders-table td img {
        border-radius: 5px;
    }

    .status {
        padding: 5px 10px;
        border-radius: 3px;
        font-weight: bold;
        text-transform: capitalize;
    }

    .status.pending {
        background-color: #f39c12;
        color: #fff;
    }

    .status.completed {
        background-color: #2ecc71;
        color: #fff;
    }

    .status.shipped {
        background-color: #3498db;
        color: #fff;
    }

    .status.cancelled {
        background-color: #e74c3c;
        color: #fff;
    }

    .no-orders {
        text-align: center;
        font-size: 18px;
        color: #999;
        padding: 20px 0;
    }
</style>

<div class="orders-container">
    <!-- Header -->
    <div class="orders-header">
        <h2>Your Orders</h2>
    </div>

    <!-- Orders Table -->
    <table class="orders-table">
        <thead>
            <tr>
                <th>Order #</th>
                <th>Order Date</th>
                <th>Status</th>
                <th>Total</th>
                <th>Items</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
                <tr>
                    <td>{{ order.tracking_number }}</td>
                    <td>{{ order.created_at|date:"M d, Y" }}</td>
                    <td>
                        <span class="status 
                            {% if order.order_items.first.status == 'Order Pending' %}pending
                            {% elif order.order_items.first.status == 'Order Confirmed' %}completed
                            {% elif order.order_items.first.status == 'Shipped' %}shipped
                            {% elif order.order_items.first.status == 'Delivered' %}completed
                            {% elif order.order_items.first.status == 'Cancelled' %}cancelled
                            {% endif %}">
                            {{ order.order_items.first.status }}
                        </span>
                    </td>
                    <td>${{ order.total_price }}</td>
                    <td>
                        {% for item in order.order_items.all %}
                            <img src="{{ item.variant.image1.url }}" alt="{{ item.variant.product.name }}" height="50">
                        {% endfor %}
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="5" class="no-orders">No orders found.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
